<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Character Manager</title>
</head>
<body id="io-github-shunshun94-trpg-characterManager">
<div id="io-github-shunshun94-trpg-characterManager-base"></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src='../jquery/com/hiyoko/dodontof/v2/DodontoF-Client.js'></script>
<script src='../other/io/github/shunshun94/trpg/characterManager.js'></script>
<script src='../jquery/com/hiyoko/util/v2/utils.js'></script>
<script src="../jquery/com/hiyoko/vampireblood/client.js"></script>
<script src="../jquery/com/hiyoko/vampireblood/sw2.js"></script>


<script>
var query = com.hiyoko.util.getQueries();
var $base = $('#io-github-shunshun94-trpg-characterManager-base');

$base.on(io.github.shunshun94.trpg.HiyokoSheetHandler.EVENTS.REQUEST, function(e) {
	console.log(e.type, e);
	io.github.shunshun94.trpg.redirectPromise(com.hiyoko.VampireBlood.SW2.getSheet(e.sheet), e)
});

var client = new com.hiyoko.DodontoF.V2.Room(
		query.url || 'http://127.0.0.1:3001',
		query.room || '0',
		query.pass || '');

$base.on(io.github.shunshun94.trpg.TofHandler.EVENTS.ROOM, function(e) {
	console.log(e.type, e);
	io.github.shunshun94.trpg.redirectPromise(client[e.method].apply(client, e.args), e)
});

var cm = new io.github.shunshun94.trpg.CharacterManager($base);
cm.appendCharacters([116063, 148330]).then(console.log,console.error)
</script>
</body>
</html>