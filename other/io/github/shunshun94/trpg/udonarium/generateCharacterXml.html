<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="./generateCharacterXml.js"></script>
<script src="../discord/logPicker.js"></script>
</head>
<body>
URL: <input id="url" type="text" value="https://yutorize.2-d.jp/ytsheet/sw2.5/?id=KFyZla" />
<button id="execute">execute</button>
<hr/>
<p id="download"></p>
<textarea style="width:600px;height:360px;" id="result"></textarea>
<script>
$('#execute').click((e)=>{
	$.ajax({
		type:'get',
		url: `${$('#url').val()}&mode=json`,
		async:true,
		dataType:'jsonp'
	}).done((result)=>{
		const data = io.github.shunshun94.trpg.udonarium.generateCharacterXmlFromYtSheet2SwordWorldPC(result, $('#url').val());
		$('#result').val(data);
		const url = io.github.shunshun94.trpg.discord.LogPicker.generateUrl(data, 'text/xml;charset=utf-8;');
		$('#download').html(`<a href="${url}" target="_blank" download="data_${result.characterName}.xml">ダウンロード</a>`);
	});	
});



</script>
</body>
</html>