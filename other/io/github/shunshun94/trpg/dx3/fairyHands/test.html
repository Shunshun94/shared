<html>
<h1>妖精の手ツールテスト結果</h1>
<div id="result"></div>
<p><a href="./index.html">実提供環境</a></p>
<script src="./fairyHands.js"></script>
<script>
    const tests = [
        {
            input: '(1DX10) ＞ 1[1] ＞ 0 (ファンブル)',
            expected: '1dx+10@10'
        }, {
            input: '(4DX10) ＞ 1[1,1,1,1] ＞ 0 (ファンブル)',
            expected: '1dx+10@10'
        }, {
            input: '4dx@10 1[1,1,1,1] ＞ 0 (ファンブル) はいやじゃ、いやじゃ、妾はファンブルなどだしとうないっ\n(4DX10) ＞ 1[1,1,1,1] ＞ 0 (ファンブル)',
            expected: '1dx+10@10'
        }, {
            input: '(1DX10+4) ＞ 1[1]+4 ＞ 0 (ファンブル)',
            expected: '1dx+14@10'
        }, {
            input: '8dx+4 (8DX7+4) ＞ 10[1,2,2,2,3,3,5,7]+10[8]+4[2,4]+4 ＞ 28',
            expected: '1dx+34@7'
        }, {
            input: '(8DX7+4) ＞ 10[1,2,2,2,3,3,5,7]+10[8]+4[4]+4 ＞ 28',
            expected: '1dx+34@7'
        }, {
            input: '8dx+4 こいつが超ベジータのビッグ・バン・アタックだ「ベジータ」\n(8DX7+4) ＞ 10[1,2,2,2,3,3,5,7]+10[8]+4[4]+4 ＞ 28',
            expected: '1dx+34@7'
        }, {
            input: '8dx (8DX7) ＞ 10[2,4,5,6,6,7,8,8]+10[5,6,9]+10[7]+10[7]+10[10]+10[7]+10[9]+10[8]+2[2] ＞ 82',
            expected: '1dx+90@7'
        }, {
            input: '(8DX7) ＞ 10[2,4,5,6,6,7,8,8]+10[5,6,9]+10[7]+10[7]+10[10]+10[7]+10[9]+10[8]+2[2] ＞ 82',
            expected: '1dx+90@7'
        }, {
            input: '1dx+3 (1DX11+3) ＞ 9[9]+3 ＞ 12',
            expected: '13'
        }
    ];
    document.getElementById('result').innerHTML = tests.map((d, i)=>{
        d.result = io.github.shunshun94.trpg.dx3.FairyHands.calc(d.input, {});
        return d;
    }).map((d, i)=>{
        return `<h2>ケース${i+1}</h2>
            <p>入力：<code>${d.input.replaceAll('\n', '<br/>')}</code></p>
            <p>結果：${ d.result === d.expected ?
                '<span style="color:blue">OK（' + d.expected + '）</span>' :
                '<span style="color:red">NG<br/>EXPECTED: <code>' + d.expected + '</code><br/>ACTUAL  : <code>' +  d.result + '</code></span>' }</p>`;
    }).join('\n');
    </script>
</html>