<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta property="og:title" content="é»’çµ¢ã®ã‚¢ãƒ´ã‚¡ãƒ³ãƒ‰ãƒŠãƒ¼ ãƒ€ã‚¤ã‚¢ã‚¯ãƒ­ãƒƒã‚¯ãƒãƒƒãƒ—æç”»ãƒ„ãƒ¼ãƒ«" />
<meta property="og:type" content="website" />
<meta property="og:image" content="https://shunshun94.github.io/shared/other/io/github/shunshun94/trpg/avandner/map/ogp.png" />
<meta property="og:site_name" content="https://github.com/Shunshun94/shared/" />
<meta property="og:description" content="ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆä¸Šã«åŸ‹ã‚è¾¼ã‚€ãŸã‚ã®ãƒ€ã‚¤ã‚¢ã‚¯ãƒ­ãƒƒã‚¯ãƒãƒƒãƒ—ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@Shunshun94" />
<meta name="twitter:domain" content="shunshun94.github.io" />
<meta name="twitter:title" content="é»’çµ¢ã®ã‚¢ãƒ´ã‚¡ãƒ³ãƒ‰ãƒŠãƒ¼ ãƒ€ã‚¤ã‚¢ã‚¯ãƒ­ãƒƒã‚¯ãƒãƒƒãƒ—æç”»ãƒ„ãƒ¼ãƒ«" />
<meta name="twitter:description" content="ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆä¸Šã«åŸ‹ã‚è¾¼ã‚€ãŸã‚ã®ãƒ€ã‚¤ã‚¢ã‚¯ãƒ­ãƒƒã‚¯ãƒãƒƒãƒ—ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«" />
<meta name="twitter:image" content="https://shunshun94.github.io/shared/other/io/github/shunshun94/trpg/avandner/map/ogp.png" />
<title>é»’çµ¢ã®ã‚¢ãƒ´ã‚¡ãƒ³ãƒ‰ãƒŠãƒ¼ ãƒ€ã‚¤ã‚¢ã‚¯ãƒ­ãƒƒã‚¯ãƒãƒƒãƒ—æç”»ãƒ„ãƒ¼ãƒ«</title>
<script src="map.js"></script>
<script src="../../../util/common.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
</head>
<body>
    <div id="base" style="min-height:600px;"></div>
    <div id="operation" style="position:absolute;top:4px;right:4px;">
        <table border="1">
            <tr>
                <th>ãƒãƒƒãƒ—é«˜ã•</th>
                <td><input type="number" id="height" value="600" /></td>
            </tr>
            <tr>
                <th>ãƒãƒƒãƒ—æ¨ªå¹…</th>
                <td><input type="number" id="width" value="600" /></td>
            </tr>
            <tr>
                <th>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®é…ç½®</th>
                <td><input type="text" value="" id="characters" /><br/>ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§<strong>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å:å ´æ‰€</strong>è¡¨è¨˜</td>
            </tr>
            <tr>
                <th>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®è¡¨ç¤ºã‚µã‚¤ã‚º</th>
                <td><input type="number" value="8" id="characterFontSize" /></td>
            </tr>
            <tr>
                <th>ç§»å‹•ã®è»Œè·¡</th>
                <td><input type="text" value="" id="move" /><br/>ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§ç§»å‹•ã—ãŸé †ã§è¨˜è¼‰</td>
            </tr>
            <tr>
                <th>ç§»å‹•ã®è»Œè·¡ã®å¤ªã•</th>
                <td><input type="text" value="4px" id="moveWidth" /><br/>em ã‚„ cmã€px ãªã©ã§æŒ‡å®š</td>
            </tr>
            <tr><td colspan="2" style="padding:4px;"><button id="exec">è¡¨ã«å…¥ã‚ŒãŸæƒ…å ±ã§å†æç”»</button>ã€€<button id="sample">ã‚µãƒ³ãƒ—ãƒ«ã‚’æç”»</button></td></tr>
        </table>
        <p><span>SVG ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</span><br/>
        <textarea id="copy_svg" style="resize:none;width:90%;"></textarea></p>
        <p><span>æç”»ã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’èª­ã¿è¾¼ã‚€ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</span><br/>
        <textarea id="copy_import" style="resize:none;width:90%;">&lt;script src="https://shunshun94.github.io/shared/other/io/github/shunshun94/trpg/avandner/map/map.js"&gt;&lt;/script&gt;</textarea></p>
        <p><span>æç”»ç”¨ HTMLãƒ»JavaScript ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</span><br/>
        <textarea id="copy_html" style="resize:none;width:90%;"></textarea></p>
        <p><button id="dl_svg">SVGãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button></p>
        <p><button id="dl_png">PNGãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button></p>
    </div>
    <script>
    const query = io.github.shunshun94.util.getQueries();
    const characters = {};
    if(query.get('characters')) {
        decodeURIComponent(query.get('characters')).split(',').forEach((t)=>{const splited=t.split(':');characters[splited[0]] = splited[1];});
    }
    const move = query.get('move') ? decodeURIComponent(query.get('move')).split(',') : false;
    const generateParam = {
        characters:          characters,
        width:               query.get('width'),
        height:              query.get('height'),
        characterFontSize:   query.get('characterFontSize'),
        numberLabelFontSize: query.get('numberLabelFontSize'),
        move:                move,
        moveWidth:           query.get('moveWidth')
    }
    const svg = io.github.shunshun94.trpg.avandner.map.generate(generateParam);
    document.getElementById('base').innerHTML = svg;
    document.getElementById('copy_svg').value = svg;
    const rndId = 'io-github-shunshun94-trpg-avandner-map-svg' + io.github.shunshun94.util.rndString(8, '-');
    document.getElementById('copy_html').value = [
        `<div id="${rndId}"></div>\n`,
        `<scr`,
        `ipt>document.getElementById('${rndId}').innerHTML = io.github.shunshun94.trpg.avandner.map.generate(${JSON.stringify(generateParam)});</scr`,
        `ipt>`
    ].join('')
    io.github.shunshun94.util.setValuesFromQueries();
    document.getElementById('exec').onclick = (e) => {
        location.href = `${location.origin}${location.pathname}?` + ['height', 'width', 'characters', 'characterFontSize', 'move', 'moveWidth'].map((column)=>{
            return `${column}=${document.getElementById(column).value}`;
        }).join('&');
    };
    document.getElementById('sample').onclick = (e) => {
        location.href = `${location.origin}${location.pathname}?height=500&width=500&characters=ğŸ¸:c,ğŸ¥:8i,ğŸ:4i,ğŸ˜º:9o&characterFontSize=16&move=7o,8o,8i`;
    };
    document.getElementById('copy_svg').onclick = (e) => {
        io.github.shunshun94.util.insertToClipboard(document.getElementById('copy_svg').value);
        alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã« SVG ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
    };
    document.getElementById('copy_import').onclick = (e) => {
        io.github.shunshun94.util.insertToClipboard(document.getElementById('copy_import').value);
        alert('ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’èª­ã¿è¾¼ã‚€ãŸã‚ã® HTML ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
    };
    document.getElementById('copy_html').onclick = (e) => {
        io.github.shunshun94.util.insertToClipboard(document.getElementById('copy_html').value);
        alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã« HTML ã¨ JavaScript ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
    };
    document.getElementById('dl_svg').onclick = (e) => {
        io.github.shunshun94.util.downloadFile(`${rndId}.svg`, svg);
    };
    document.getElementById('dl_png').onclick = (e) => {
        html2canvas(document.getElementById('base')).then(canvas => {
            let downloadEle = document.createElement("a");
            downloadEle.href = canvas.toDataURL("image/png");
            downloadEle.download = `${rndId}.png`;
            downloadEle.click();
            downloadEle.remove();
        });
    };
    </script>
<footer>
<a href="https://twitter.com/Shunshun94">ä½œè€… Twitter</a> | <a href="https://github.com/Shunshun94/shared/tree/master/other/io/github/shunshun94/trpg/avandner/map">GitHub</a> | <a href="http://amzn.asia/8mNqdKy">ã²ã‚ˆã“ã®ã»ã—ã„ç‰©ã‚Šã™ã¨</a>
<hr>
æœ¬ãƒ„ãƒ¼ãƒ«ã¯ã€ã€Œã©ã‚‰ã“ã«ã‚ã‚“ã€ãŒæ¨©åˆ©ã‚’æœ‰ã™ã‚‹ã€é»’çµ¢ã®ã‚¢ãƒ´ã‚¡ãƒ³ãƒ‰ãƒŠãƒ¼ã€ã®ãƒ—ãƒ¬ã‚¤ã‚’æ”¯æ´ã™ã‚‹ãŸã‚ã«ä½œã‚‰ã‚ŒãŸäºŒæ¬¡å‰µä½œã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</footer>
</body>
</html>
